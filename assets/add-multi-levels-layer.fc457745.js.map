{"version":3,"file":"add-multi-levels-layer.fc457745.js","sources":["../../../examples/add-multi-levels-layer.ts"],"sourcesContent":["import { Map as MapboxMap, Popup } from 'mapbox-gl';\n\nimport accessToken from './mapbox-access-token';\nimport { addIndoorTo, IndoorControl, IndoorMap, MapboxMapWithIndoor } from '../src/index';\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './style.css';\nimport { Point } from 'geojson';\n\nconst app = document.querySelector<HTMLDivElement>('#app')!\n\nconst map = new MapboxMap({\n    container: app,\n    zoom: 18,\n    center: [2.3592843, 48.8767904],\n    style: 'mapbox://styles/mapbox/streets-v10',\n    accessToken,\n    hash: true\n}) as MapboxMapWithIndoor;\n\nconst mapLoadedPr = new Promise(resolve => map.on('load', resolve));\n\n/**\n * Indoor specific\n */\n\naddIndoorTo(map);\n\n// Retrieve the geojson from the path and add the map\nconst geojson = await (await fetch('maps/gare-de-l-est.geojson')).json();\nmap.indoor.addMap(IndoorMap.fromGeojson(geojson));\n\n// Add the specific control\nmap.addControl(new IndoorControl());\n\nawait mapLoadedPr;\n\nconst image: ImageData = await new Promise(resolve => map.loadImage(\n    './img/red-marker.png', (_: string, image: ImageData) => resolve(image)));\nmap.addImage('poi', image);\n\nmap.addSource('pois', {\n    type: 'geojson',\n    data: {\n        type: 'FeatureCollection',\n        features: [\n            {\n                type: 'Feature',\n                geometry: {\n                    type: 'Point',\n                    coordinates: [2.359497, 48.87688]\n                },\n                properties: {\n                    level: '-1',\n                    name: 'Paul'\n                }\n            },\n            {\n                type: 'Feature',\n                geometry: {\n                    type: 'Point',\n                    coordinates: [2.358508, 48.877255]\n                },\n                properties: {\n                    level: '0',\n                    name: 'Relay'\n                }\n            }\n        ]\n    }\n});\n\nmap.indoor.addLayerForFiltering({\n    'id': 'pois',\n    'type': 'symbol',\n    'source': 'pois',\n    'layout': {\n        'icon-image': 'poi'\n    }\n});\n\nmap.on('click', 'pois', (e) => {\n\n    const { geometry, properties } = e.features![0];\n    const coordinates = (geometry as Point).coordinates.slice();\n    const description = properties?.name + ' (level: ' + properties?.level + ')';\n\n    new Popup()\n        .setLngLat(coordinates as [number, number])\n        .setHTML(description)\n        .addTo(map);\n});\n\nmap.on('mouseenter', 'pois', () => {\n    map.getCanvas().style.cursor = 'pointer';\n});\n\nmap.on('mouseleave', 'pois', () => {\n    map.getCanvas().style.cursor = '';\n});\n\n"],"names":["app","map","MapboxMap","accessToken","mapLoadedPr","resolve","addIndoorTo","geojson","IndoorMap","IndoorControl","image","_","e","geometry","properties","coordinates","description","Popup"],"mappings":"yGASA,MAAMA,EAAM,SAAS,cAA8B,MAAM,EAEnDC,EAAM,IAAIC,EAAAA,QAAAA,IAAU,CACtB,UAAWF,EACX,KAAM,GACN,OAAQ,CAAC,UAAW,UAAU,EAC9B,MAAO,qCACP,YAAAG,EACA,KAAM,EACV,CAAC,EAEKC,EAAc,IAAI,QAAQC,GAAWJ,EAAI,GAAG,OAAQI,CAAO,CAAC,EAMlEC,EAAYL,CAAG,EAGf,MAAMM,EAAU,MAAO,MAAM,MAAM,4BAA4B,GAAG,KAAK,EACvEN,EAAI,OAAO,OAAOO,EAAU,YAAYD,CAAO,CAAC,EAGhDN,EAAI,WAAW,IAAIQ,CAAe,EAElC,MAAML,EAEN,MAAMM,EAAmB,MAAM,IAAI,WAAmBT,EAAI,UACtD,uBAAwB,CAACU,EAAWD,IAAqBL,EAAQK,CAAK,CAAC,CAAC,EAC5ET,EAAI,SAAS,MAAOS,CAAK,EAEzBT,EAAI,UAAU,OAAQ,CAClB,KAAM,UACN,KAAM,CACF,KAAM,oBACN,SAAU,CACN,CACI,KAAM,UACN,SAAU,CACN,KAAM,QACN,YAAa,CAAC,SAAU,QAAQ,CACpC,EACA,WAAY,CACR,MAAO,KACP,KAAM,MACV,CACJ,EACA,CACI,KAAM,UACN,SAAU,CACN,KAAM,QACN,YAAa,CAAC,SAAU,SAAS,CACrC,EACA,WAAY,CACR,MAAO,IACP,KAAM,OACV,CACJ,CACJ,CACJ,CACJ,CAAC,EAEDA,EAAI,OAAO,qBAAqB,CAC5B,GAAM,OACN,KAAQ,SACR,OAAU,OACV,OAAU,CACN,aAAc,KAClB,CACJ,CAAC,EAEDA,EAAI,GAAG,QAAS,OAASW,GAAM,CAE3B,KAAM,CAAE,SAAAC,EAAU,WAAAC,CAAW,EAAIF,EAAE,SAAU,GACvCG,EAAeF,EAAmB,YAAY,MAAM,EACpDG,EAAcF,GAAY,KAAO,YAAcA,GAAY,MAAQ,IAErE,IAAAG,EAAA,QAAA,MAAA,EACC,UAAUF,CAA+B,EACzC,QAAQC,CAAW,EACnB,MAAMf,CAAG,CAClB,CAAC,EAEDA,EAAI,GAAG,aAAc,OAAQ,IAAM,CAC3BA,EAAA,UAAY,EAAA,MAAM,OAAS,SACnC,CAAC,EAEDA,EAAI,GAAG,aAAc,OAAQ,IAAM,CAC3BA,EAAA,UAAY,EAAA,MAAM,OAAS,EACnC,CAAC"}