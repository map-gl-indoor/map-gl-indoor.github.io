import{c as oe,g as wr,d as xr,p as Er,a as Cr,I as Ar,b as Pr}from"./style.532636f9.js";import{m as Lr,a as Nt}from"./mapbox-gl.2e8cdf54.js";var Mt=Or,Rr=Object.prototype.hasOwnProperty;function Or(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)Rr.call(r,i)&&(e[i]=r[i])}return e}var Ut={exports:{}};(function(e,t){(function(){var r={};e.exports=r,r.simpleFilter=function(i,a){return a.filter(function(n){return r.test(i,n)})},r.test=function(i,a){return r.match(i,a)!==null},r.match=function(i,a,n){n=n||{};var s=0,f=[],u=a.length,l=0,h=0,v=n.pre||"",y=n.post||"",P=n.caseSensitive&&a||a.toLowerCase(),w;i=n.caseSensitive&&i||i.toLowerCase();for(var x=0;x<u;x++)w=a[x],P[x]===i[s]?(w=v+w+y,s+=1,h+=1+h):h=0,l+=h,f[f.length]=w;return s===i.length?(l=P===i?1/0:l,{rendered:f.join(""),score:l}):null},r.filter=function(i,a,n){return!a||a.length===0?[]:typeof i!="string"?a:(n=n||{},a.reduce(function(s,f,u,l){var h=f;n.extract&&(h=n.extract(f));var v=r.match(i,h,n);return v!=null&&(s[s.length]={string:v.rendered,score:v.score,index:u,original:f}),s},[]).sort(function(s,f){var u=f.score-s.score;return u||s.index-f.index}))}})()})(Ut);var G=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};G.prototype.show=function(){this.element.style.display="block"};G.prototype.hide=function(){this.element.style.display="none"};G.prototype.add=function(e){this.items.push(e)};G.prototype.clear=function(){this.items=[],this.active=0};G.prototype.isEmpty=function(){return!this.items.length};G.prototype.isVisible=function(){return this.element.style.display==="block"};G.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};G.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};G.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};G.prototype.move=function(e){this.active=e,this.draw()};G.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};G.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};G.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var kr=G,Sr=Mt,jr=Ut.exports,Ir=kr,z=function(e,t,r){return r=r||{},this.options=Sr({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=e,this.data=t||[],this.list=new Ir(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(i){this.handleKeyUp(i.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(i){this.handleKeyDown(i)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(i){this.handlePaste(i)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};z.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};z.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};z.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};z.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};z.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var r=0;r<t.length&&(this.list.add(t[r]),r!==this.options.limit-1);r++);this.list.draw()}.bind(this))};z.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};z.prototype.update=function(e){this.data=e,this.handleKeyUp()};z.prototype.clear=function(){this.data=[],this.list.clear()};z.prototype.normalize=function(e){return e=e.toLowerCase(),e};z.prototype.match=function(e,t){return e.indexOf(t)>-1};z.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};z.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(i){return this.getItemValue(i)}.bind(this)},r;this.options.filter?(r=jr.filter(this.query,this.data,t),r=r.map(function(i){return{original:i.original,string:this.render(i.original,i.string)}}.bind(this))):r=this.data.map(function(i){var a=this.render(i);return{original:i,string:a}}.bind(this)),e(r)};z.prototype.getItemValue=function(e){return e};z.prototype.render=function(e,t){if(t)return t;for(var r=e.original?this.getItemValue(e.original):this.getItemValue(e),i=this.normalize(r),a=i.lastIndexOf(this.query);a>-1;){var n=a+this.query.length;r=r.slice(0,a)+"<strong>"+r.slice(a,n)+"</strong>"+r.slice(n),a=i.slice(0,a).lastIndexOf(this.query)}return r};z.prototype.renderError=function(e){this.list.drawError(e)};var Tr=z,zt=Tr,Dr=zt;typeof window<"u"&&(window.Suggestions=zt);var Fr="Expected a function",st=0/0,qr="[object Symbol]",Nr=/^\s+|\s+$/g,Mr=/^[-+]0x[0-9a-f]+$/i,Ur=/^0b[01]+$/i,zr=/^0o[0-7]+$/i,$r=parseInt,Hr=typeof oe=="object"&&oe&&oe.Object===Object&&oe,Gr=typeof self=="object"&&self&&self.Object===Object&&self,Wr=Hr||Gr||Function("return this")(),Qr=Object.prototype,Br=Qr.toString,Vr=Math.max,Kr=Math.min,Pe=function(){return Wr.Date.now()};function Xr(e,t,r){var i,a,n,s,f,u,l=0,h=!1,v=!1,y=!0;if(typeof e!="function")throw new TypeError(Fr);t=ut(t)||0,Ze(r)&&(h=!!r.leading,v="maxWait"in r,n=v?Vr(ut(r.maxWait)||0,t):n,y="trailing"in r?!!r.trailing:y);function P(L){var I=i,W=a;return i=a=void 0,l=L,s=e.apply(W,I),s}function w(L){return l=L,f=setTimeout(O,t),h?P(L):s}function x(L){var I=L-u,W=L-l,U=t-I;return v?Kr(U,n-W):U}function j(L){var I=L-u,W=L-l;return u===void 0||I>=t||I<0||v&&W>=n}function O(){var L=Pe();if(j(L))return T(L);f=setTimeout(O,x(L))}function T(L){return f=void 0,y&&i?P(L):(i=a=void 0,s)}function Q(){f!==void 0&&clearTimeout(f),l=0,i=u=a=f=void 0}function N(){return f===void 0?s:T(Pe())}function M(){var L=Pe(),I=j(L);if(i=arguments,a=this,u=L,I){if(f===void 0)return w(u);if(v)return f=setTimeout(O,t),P(u)}return f===void 0&&(f=setTimeout(O,t)),s}return M.cancel=Q,M.flush=N,M}function Ze(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Jr(e){return!!e&&typeof e=="object"}function Yr(e){return typeof e=="symbol"||Jr(e)&&Br.call(e)==qr}function ut(e){if(typeof e=="number")return e;if(Yr(e))return st;if(Ze(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ze(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Nr,"");var r=Ur.test(e);return r||zr.test(e)?$r(e.slice(2),r?2:8):Mr.test(e)?st:+e}var Zr=Xr,rt={exports:{}},se=typeof Reflect=="object"?Reflect:null,lt=se&&typeof se.apply=="function"?se.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},ge;se&&typeof se.ownKeys=="function"?ge=se.ownKeys:Object.getOwnPropertySymbols?ge=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ge=function(t){return Object.getOwnPropertyNames(t)};function en(e){console&&console.warn&&console.warn(e)}var $t=Number.isNaN||function(t){return t!==t};function S(){S.init.call(this)}rt.exports=S;rt.exports.once=on;S.EventEmitter=S;S.prototype._events=void 0;S.prototype._eventsCount=0;S.prototype._maxListeners=void 0;var ft=10;function _e(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return ft},set:function(e){if(typeof e!="number"||e<0||$t(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ft=e}});S.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};S.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||$t(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ht(e){return e._maxListeners===void 0?S.defaultMaxListeners:e._maxListeners}S.prototype.getMaxListeners=function(){return Ht(this)};S.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var a=t==="error",n=this._events;if(n!==void 0)a=a&&n.error===void 0;else if(!a)return!1;if(a){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var f=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var u=n[t];if(u===void 0)return!1;if(typeof u=="function")lt(u,this,r);else for(var l=u.length,h=Vt(u,l),i=0;i<l;++i)lt(h[i],this,r);return!0};function Gt(e,t,r,i){var a,n,s;if(_e(r),n=e._events,n===void 0?(n=e._events=Object.create(null),e._eventsCount=0):(n.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),n=e._events),s=n[t]),s===void 0)s=n[t]=r,++e._eventsCount;else if(typeof s=="function"?s=n[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),a=Ht(e),a>0&&s.length>a&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=s.length,en(f)}return e}S.prototype.addListener=function(t,r){return Gt(this,t,r,!1)};S.prototype.on=S.prototype.addListener;S.prototype.prependListener=function(t,r){return Gt(this,t,r,!0)};function tn(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Wt(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=tn.bind(i);return a.listener=r,i.wrapFn=a,a}S.prototype.once=function(t,r){return _e(r),this.on(t,Wt(this,t,r)),this};S.prototype.prependOnceListener=function(t,r){return _e(r),this.prependListener(t,Wt(this,t,r)),this};S.prototype.removeListener=function(t,r){var i,a,n,s,f;if(_e(r),a=this._events,a===void 0)return this;if(i=a[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===r||i[s].listener===r){f=i[s].listener,n=s;break}if(n<0)return this;n===0?i.shift():rn(i,n),i.length===1&&(a[t]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",t,f||r)}return this};S.prototype.off=S.prototype.removeListener;S.prototype.removeAllListeners=function(t){var r,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var n=Object.keys(i),s;for(a=0;a<n.length;++a)s=n[a],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this};function Qt(e,t,r){var i=e._events;if(i===void 0)return[];var a=i[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?nn(a):Vt(a,a.length)}S.prototype.listeners=function(t){return Qt(this,t,!0)};S.prototype.rawListeners=function(t){return Qt(this,t,!1)};S.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Bt.call(e,t)};S.prototype.listenerCount=Bt;function Bt(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}S.prototype.eventNames=function(){return this._eventsCount>0?ge(this._events):[]};function Vt(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function rn(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function nn(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function on(e,t){return new Promise(function(r,i){function a(s){e.removeListener(t,n),i(s)}function n(){typeof e.removeListener=="function"&&e.removeListener("error",a),r([].slice.call(arguments))}Kt(e,t,n,{once:!0}),t!=="error"&&an(e,a,{once:!0})})}function an(e,t,r){typeof e.on=="function"&&Kt(e,"error",t,r)}function Kt(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(n){i.once&&e.removeEventListener(t,a),r(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var sn={"country.3148":{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},"country.3145":{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},"country.330":{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},"country.3179":{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},un=function(e,t,r,i,a,n,s,f){if(!e){var u;if(t===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,i,a,n,s,f],h=0;u=new Error(t.replace(/%s/g,function(){return l[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}},Xt=un,Jt={};Jt.DEFAULT_ENDPOINT="https://api.mapbox.com";var ln={exports:{}};function fn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Le={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var ct;function cn(){return ct||(ct=1,function(e,t){(function(r,i){e.exports=i()})(oe,function(){function r(c){var p=typeof c;return c!==null&&(p==="object"||p==="function")}function i(c){return typeof c=="function"}var a=void 0;Array.isArray?a=Array.isArray:a=function(c){return Object.prototype.toString.call(c)==="[object Array]"};var n=a,s=0,f=void 0,u=void 0,l=function(p,m){L[s]=p,L[s+1]=m,s+=2,s===2&&(u?u(I):U())};function h(c){u=c}function v(c){l=c}var y=typeof window<"u"?window:void 0,P=y||{},w=P.MutationObserver||P.WebKitMutationObserver,x=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",j=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function O(){return function(){return process.nextTick(I)}}function T(){return typeof f<"u"?function(){f(I)}:M()}function Q(){var c=0,p=new w(I),m=document.createTextNode("");return p.observe(m,{characterData:!0}),function(){m.data=c=++c%2}}function N(){var c=new MessageChannel;return c.port1.onmessage=I,function(){return c.port2.postMessage(0)}}function M(){var c=setTimeout;return function(){return c(I,1)}}var L=new Array(1e3);function I(){for(var c=0;c<s;c+=2){var p=L[c],m=L[c+1];p(m),L[c]=void 0,L[c+1]=void 0}s=0}function W(){try{var c=Function("return this")().require("vertx");return f=c.runOnLoop||c.runOnContext,T()}catch{return M()}}var U=void 0;x?U=O():w?U=Q():j?U=N():y===void 0&&typeof fn=="function"?U=W():U=M();function ee(c,p){var m=this,b=new this.constructor(B);b[X]===void 0&&at(b);var E=m._state;if(E){var C=arguments[E-1];l(function(){return ne(E,b,C,m._result)})}else F(m,b,c,p);return b}function te(c){var p=this;if(c&&typeof c=="object"&&c.constructor===p)return c;var m=new p(B);return _(m,c),m}var X=Math.random().toString(36).substring(2);function B(){}var J=void 0,re=1,V=2;function ue(){return new TypeError("You cannot resolve a promise with itself")}function Ee(){return new TypeError("A promises callback cannot return that same promise.")}function me(c,p,m,b){try{c.call(p,m,b)}catch(E){return E}}function o(c,p,m){l(function(b){var E=!1,C=me(m,p,function(q){E||(E=!0,p!==q?_(b,q):R(b,q))},function(q){E||(E=!0,k(b,q))},"Settle: "+(b._label||" unknown promise"));!E&&C&&(E=!0,k(b,C))},c)}function d(c,p){p._state===re?R(c,p._result):p._state===V?k(c,p._result):F(p,void 0,function(m){return _(c,m)},function(m){return k(c,m)})}function g(c,p,m){p.constructor===c.constructor&&m===ee&&p.constructor.resolve===te?d(c,p):m===void 0?R(c,p):i(m)?o(c,p,m):R(c,p)}function _(c,p){if(c===p)k(c,ue());else if(r(p)){var m=void 0;try{m=p.then}catch(b){k(c,b);return}g(c,p,m)}else R(c,p)}function A(c){c._onerror&&c._onerror(c._result),$(c)}function R(c,p){c._state===J&&(c._result=p,c._state=re,c._subscribers.length!==0&&l($,c))}function k(c,p){c._state===J&&(c._state=V,c._result=p,l(A,c))}function F(c,p,m,b){var E=c._subscribers,C=E.length;c._onerror=null,E[C]=p,E[C+re]=m,E[C+V]=b,C===0&&c._state&&l($,c)}function $(c){var p=c._subscribers,m=c._state;if(p.length!==0){for(var b=void 0,E=void 0,C=c._result,q=0;q<p.length;q+=3)b=p[q],E=p[q+m],b?ne(m,b,E,C):E(C);c._subscribers.length=0}}function ne(c,p,m,b){var E=i(m),C=void 0,q=void 0,ae=!0;if(E){try{C=m(b)}catch(ye){ae=!1,q=ye}if(p===C){k(p,Ee());return}}else C=b;p._state!==J||(E&&ae?_(p,C):ae===!1?k(p,q):c===re?R(p,C):c===V&&k(p,C))}function K(c,p){try{p(function(b){_(c,b)},function(b){k(c,b)})}catch(m){k(c,m)}}var Y=0;function ve(){return Y++}function at(c){c[X]=Y++,c._state=void 0,c._result=void 0,c._subscribers=[]}function dr(){return new Error("Array Methods must be provided an Array")}var pr=function(){function c(p,m){this._instanceConstructor=p,this.promise=new p(B),this.promise[X]||at(this.promise),n(m)?(this.length=m.length,this._remaining=m.length,this._result=new Array(this.length),this.length===0?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(m),this._remaining===0&&R(this.promise,this._result))):k(this.promise,dr())}return c.prototype._enumerate=function(m){for(var b=0;this._state===J&&b<m.length;b++)this._eachEntry(m[b],b)},c.prototype._eachEntry=function(m,b){var E=this._instanceConstructor,C=E.resolve;if(C===te){var q=void 0,ae=void 0,ye=!1;try{q=m.then}catch(Ae){ye=!0,ae=Ae}if(q===ee&&m._state!==J)this._settledAt(m._state,b,m._result);else if(typeof q!="function")this._remaining--,this._result[b]=m;else if(E===H){var Ce=new E(B);ye?k(Ce,ae):g(Ce,m,q),this._willSettleAt(Ce,b)}else this._willSettleAt(new E(function(Ae){return Ae(m)}),b)}else this._willSettleAt(C(m),b)},c.prototype._settledAt=function(m,b,E){var C=this.promise;C._state===J&&(this._remaining--,m===V?k(C,E):this._result[b]=E),this._remaining===0&&R(C,this._result)},c.prototype._willSettleAt=function(m,b){var E=this;F(m,void 0,function(C){return E._settledAt(re,b,C)},function(C){return E._settledAt(V,b,C)})},c}();function mr(c){return new pr(this,c).promise}function vr(c){var p=this;return n(c)?new p(function(m,b){for(var E=c.length,C=0;C<E;C++)p.resolve(c[C]).then(m,b)}):new p(function(m,b){return b(new TypeError("You must pass an array to race."))})}function yr(c){var p=this,m=new p(B);return k(m,c),m}function gr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function br(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var H=function(){function c(p){this[X]=ve(),this._result=this._state=void 0,this._subscribers=[],B!==p&&(typeof p!="function"&&gr(),this instanceof c?K(this,p):br())}return c.prototype.catch=function(m){return this.then(null,m)},c.prototype.finally=function(m){var b=this,E=b.constructor;return i(m)?b.then(function(C){return E.resolve(m()).then(function(){return C})},function(C){return E.resolve(m()).then(function(){throw C})}):b.then(m,m)},c}();H.prototype.then=ee,H.all=mr,H.race=vr,H.resolve=te,H.reject=yr,H._setScheduler=h,H._setAsap=v,H._asap=l;function _r(){var c=void 0;if(typeof oe<"u")c=oe;else if(typeof self<"u")c=self;else try{c=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var p=c.Promise;if(p){var m=null;try{m=Object.prototype.toString.call(p.resolve())}catch{}if(m==="[object Promise]"&&!p.cast)return}c.Promise=H}return H.polyfill=_r,H.Promise=H,H})}(Le)),Le.exports}(function(e){typeof Promise>"u"&&cn().polyfill(),e.export=Promise})(ln);/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var nt=function(t,r){return r&&(t.skip=function(){return r}),t.wrap=function(a,n){return a(t,n)},t.chain=function(){return typeof console<"u"&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),t.wrap.apply(this,arguments)},t};/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Yt,ce,et;Yt=nt;typeof Promise!="function"&&console&&console.log&&console.log("An ES6 Promise implementation is required to use rest.js. See https://github.com/cujojs/when/blob/master/docs/es6-promise-shim.md for using when.js as a Promise polyfill.");function he(){return ce.apply(void 0,arguments)}he.setDefaultClient=function(t){ce=t};he.getDefaultClient=function(){return ce};he.resetDefaultClient=function(){ce=et};he.setPlatformDefaultClient=function(t){if(et)throw new Error("Unable to redefine platformDefaultClient");ce=et=t};var Zt=Yt(he);/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */function hn(e){return e.toLowerCase().split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}var er=hn;/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var dn=er;function fe(e,t){return e.then(function(r){return r&&r[t]},function(r){return Promise.reject(r&&r[t])})}function pn(){return fe(this,"entity")}function mn(){return fe(fe(this,"status"),"code")}function vn(){return fe(this,"headers")}function yn(e){return e=dn(e),fe(this.headers(),e)}function gn(e){return e=[].concat(e),de(e.reduce(function(t,r){return t.then(function(i){if(typeof r=="string"&&(r={rel:r}),typeof i.entity.clientFor!="function")throw new Error("Hypermedia response expected");var a=i.entity.clientFor(r.rel);return a({params:r.params})})},this))}function de(e){return e.status=mn,e.headers=vn,e.header=yn,e.entity=pn,e.follow=gn,e}function we(e,t,r){return de(Promise.resolve(e).then(t,r))}we.make=de;we.reject=function(e){return de(Promise.reject(e))};we.promise=function(e){return de(new Promise(e))};var it=we;/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var tr,rr,nr,ir;tr=er;rr=it;nr=nt;ir=/[\r|\n]+/;function bn(e){var t={};return e&&e.trim().split(ir).forEach(function(r){var i,a,n;i=r.indexOf(":"),a=tr(r.substring(0,i).trim()),n=r.substring(i+1).trim(),t[a]?Array.isArray(t[a])?t[a].push(n):t[a]=[t[a],n]:t[a]=n}),t}function ht(e,t){return Object.keys(t||{}).forEach(function(r){if(t.hasOwnProperty(r)&&r in e)try{e[r]=t[r]}catch{}}),e}var _n=nr(function(t){return rr.promise(function(r,i){var a,n,s,f,u,l,h,v;if(t=typeof t=="string"?{path:t}:t||{},h={request:t},t.canceled){h.error="precanceled",i(h);return}if(v=t.engine||XMLHttpRequest,!v){i({request:t,error:"xhr-not-available"});return}u=t.entity,t.method=t.method||(u?"POST":"GET"),n=t.method,s=h.url=t.path||"";try{a=h.raw=new v,ht(a,t.mixin),a.open(n,s,!0),ht(a,t.mixin),f=t.headers;for(l in f)l==="Content-Type"&&f[l]==="multipart/form-data"||a.setRequestHeader(l,f[l]);t.canceled=!1,t.cancel=function(){t.canceled=!0,a.abort(),i(h)},a.onreadystatechange=function(){t.canceled||a.readyState===(v.DONE||4)&&(h.status={code:a.status,text:a.statusText},h.headers=bn(a.getAllResponseHeaders()),h.entity=a.responseText,h.status.code===1223&&(h.status.code=204),h.status.code>0?r(h):setTimeout(function(){r(h)},0))};try{a.onerror=function(){h.error="loaderror",i(h)}}catch{}a.send(u)}catch{h.error="loaderror",i(h)}})});/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var or=Zt,wn=_n;or.setPlatformDefaultClient(wn);var xn=or;/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Re,dt;function xe(){if(dt)return Re;dt=1;var e={};function t(r){var i,a,n,s;for(r||(r={}),i=1,a=arguments.length;i<a;i+=1){n=arguments[i];for(s in n)(!(s in r)||r[s]!==n[s]&&(!(s in e)||e[s]!==n[s]))&&(r[s]=n[s])}return r}return Re=t,Re}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Oe,pt;function Z(){if(pt)return Oe;pt=1;var e,t,r,i;e=Zt,t=xe(),r=it,i=nt;function a(l){return l}function n(l){return l}function s(l){return l}function f(l){if(!(this instanceof f))return new f(l);t(this,l)}function u(l){var h,v,y,P;return l=l||{},h=l.init||a,v=l.request||n,y=l.success||l.response||s,P=l.error||function(){return Promise.resolve((l.response||s).apply(this,arguments)).then(Promise.reject.bind(Promise))},function(w,x){typeof w=="object"&&(x=w),typeof w!="function"&&(w=l.client||e),x=h(x||{});function j(O){var T,Q;return T={},Q={arguments:Array.prototype.slice.call(arguments),client:j},O=typeof O=="string"?{path:O}:O||{},O.originator=O.originator||j,r(v.call(T,O,x,Q),function(N){var M,L,I;return I=w,N instanceof f&&(L=N.abort,I=N.client||I,M=N.response,N=N.request),M=M||Promise.resolve(N).then(function(W){return Promise.resolve(I(W)).then(function(U){return y.call(T,U,x,Q)},function(U){return P.call(T,U,x,Q)})}),L?Promise.race([M,L]):M},function(N){return Promise.reject({request:O,error:N})})}return i(j,w)}}return u.ComplexRequest=f,Oe=u,Oe}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var ke,mt;function En(){if(mt)return ke;mt=1;var e;return e=Z(),ke=e({init:function(t){return t.code=t.code||400,t},response:function(t,r){return t.status&&t.status.code>=r.code?Promise.reject(t):t}}),ke}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Se,vt;function ar(){if(vt)return Se;vt=1;var e,t;e=/%20/g,t=/\+/g;function r(n){return n=encodeURIComponent(n),n.replace(e,"+")}function i(n){return n=n.replace(t," "),decodeURIComponent(n)}function a(n,s,f){return Array.isArray(f)?f.forEach(function(u){n=a(n,s,u)}):(n.length>0&&(n+="&"),n+=r(s),f!=null&&(n+="="+r(f))),n}return Se={read:function(n){var s={};return n.split("&").forEach(function(f){var u,l,h;u=f.split("="),l=i(u[0]),u.length===2?h=i(u[1]):h=null,l in s?(Array.isArray(s[l])||(s[l]=[s[l]]),s[l].push(h)):s[l]=h}),s},write:function(n){var s="";return Object.keys(n).forEach(function(f){s=a(s,f,n[f])}),s}},Se}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var je,yt;function Cn(){if(yt)return je;yt=1;var e,t,r,i,a,n;e=xe(),t=ar(),i=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,a=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,n=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i;function s(l,h){var v,y,P,w,x;if(v=l,P={},h){for(y in h)x=new RegExp("\\{"+y+"\\}"),x.test(v)?v=v.replace(x,encodeURIComponent(h[y]),"g"):P[y]=h[y];w=t.write(P),w&&(v+=v.indexOf("?")===-1?"?":"&",v+=w)}return v}function f(l,h){return l.indexOf(h)===0}function u(l,h){if(!(this instanceof u))return new u(l,h);l instanceof u?(this._template=l.template,this._params=e({},this._params,h)):(this._template=(l||"").toString(),this._params=h||{})}return u.prototype={append:function(l,h){return new u(this._template+l,e({},this._params,h))},fullyQualify:function(){if(typeof location>"u")return this;if(this.isFullyQualified())return this;var l=this._template;return f(l,"//")?l=r.protocol+l:f(l,"/")?l=r.origin+l:this.isAbsolute()||(l=r.origin+r.pathname.substring(0,r.pathname.lastIndexOf("/")+1)),l.indexOf("/",8)===-1&&(l=l+"/"),new u(l,this._params)},isAbsolute:function(){return a.test(this.build())},isFullyQualified:function(){return n.test(this.build())},isCrossOrigin:function(){if(!r)return!0;var l=this.parts();return l.protocol!==r.protocol||l.hostname!==r.hostname||l.port!==r.port},parts:function(){var l,h;return l=this.fullyQualify().build().match(i),h={href:l[0],protocol:l[1],host:l[3]||"",hostname:l[4]||"",port:l[6],pathname:l[7]||"",search:l[8]||"",hash:l[9]||""},h.origin=h.protocol+"//"+h.host,h.port=h.port||(h.protocol==="https:"?"443":h.protocol==="http:"?"80":""),h},build:function(l){return s(this._template,e({},this._params,l))},toString:function(){return this.build()}},r=typeof location<"u"?new u(location.href).parts():void 0,je=u,je}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Ie,gt;function sr(){if(gt)return Ie;gt=1;var e,t;e=Z(),t=Cn();function r(a,n){return a.indexOf(n)===0}function i(a,n){return a.lastIndexOf(n)+n.length===a.length}return Ie=e({request:function(a,n){var s;return n.prefix&&!new t(a.path).isFullyQualified()&&(s=n.prefix,a.path&&(!i(s,"/")&&!r(a.path,"/")&&(s+="/"),s+=a.path),a.path=s),a}}),Ie}/*
* Copyright 2014-2016 the original author or authors
* @license MIT, see LICENSE.txt for details
*
* @author Scott Andrews
*/var Te,bt;function ur(){if(bt)return Te;bt=1;function e(t){var r,i;return r=t.split(";"),i=r[0].trim().split("+"),{raw:t,type:i[0],suffix:i[1]?"+"+i[1]:"",params:r.slice(1).reduce(function(a,n){return n=n.split("="),a[n[0].trim()]=n[1]?n[1].trim():void 0,a},{})}}return Te={parse:e},Te}/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var De,_t;function An(){if(_t)return De;_t=1;var e;e=function(){var a={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return a.genDelims=":/?#[]@",a.subDelims="!$&'()*+,;=",a.reserved=a.genDelims+a.subDelims,a.unreserved=a.alpha+a.digit+"-._~",a.url=a.reserved+a.unreserved,a.scheme=a.alpha+a.digit+"+-.",a.userinfo=a.unreserved+a.subDelims+":",a.host=a.unreserved+a.subDelims,a.port=a.digit,a.pchar=a.unreserved+a.subDelims+":@",a.segment=a.pchar,a.path=a.segment+"/",a.query=a.pchar+"/?",a.fragment=a.pchar+"/?",Object.keys(a).reduce(function(n,s){return n[s]=a[s].split("").reduce(function(f,u){return f[u]=!0,f},{}),n},{})}();function t(a,n){if(typeof a!="string")throw new Error("String required for URL encoding");return a.split("").map(function(s){if(n.hasOwnProperty(s))return s;var f=s.charCodeAt(0);if(f<=127){var u=f.toString(16).toUpperCase();return"%"+(u.length%2===1?"0":"")+u}else return encodeURIComponent(s).toUpperCase()}).join("")}function r(a){return a=a||e.unreserved,function(n){return t(n,a)}}function i(a){return decodeURIComponent(a)}return De={decode:i,encode:r(),encodeURL:r(e.url),encodeScheme:r(e.scheme),encodeUserInfo:r(e.userinfo),encodeHost:r(e.host),encodePort:r(e.port),encodePathSegment:r(e.segment),encodePath:r(e.path),encodeQuery:r(e.query),encodeFragment:r(e.fragment)},De}/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Fe,wt;function Pn(){if(wt)return Fe;wt=1;var e,t,r;e=An(),r=/^([^:]*):([0-9]+)$/,t={"":{first:"",separator:",",named:!1,empty:"",encoder:e.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:e.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:e.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:e.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:e.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:e.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:e.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:e.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}};function i(s,f,u){return f.split(",").reduce(function(l,h){var v,y;if(v={},h.slice(-1)==="*"&&(h=h.slice(0,-1),v.explode=!0),r.test(h)){var P=r.exec(h);h=P[1],v.maxLength=parseInt(P[2])}return h=e.decode(h),y=u[h],y==null||(Array.isArray(y)?l=y.reduce(function(w,x){return w.length?(w+=v.explode?s.separator:",",s.named&&v.explode&&(w+=s.encoder(h),w+=x.length?"=":s.empty)):(w+=s.first,s.named&&(w+=s.encoder(h),w+=x.length?"=":s.empty)),w+=s.encoder(x),w},l):typeof y=="object"?l=Object.keys(y).reduce(function(w,x){return w.length?w+=v.explode?s.separator:",":(w+=s.first,s.named&&!v.explode&&(w+=s.encoder(h),w+=y[x].length?"=":s.empty)),w+=s.encoder(x),w+=v.explode?"=":",",w+=s.encoder(y[x]),w},l):(y=String(y),v.maxLength&&(y=y.slice(0,v.maxLength)),l+=l.length?s.separator:s.first,s.named&&(l+=s.encoder(h),l+=y.length?"=":s.empty),l+=s.encoder(y))),l},"")}function a(s,f){var u;if(u=t[s.slice(0,1)],u?s=s.slice(1):u=t[""],u.reserved)throw new Error("Reserved expression operations are not supported");return i(u,s,f)}function n(s,f){var u,l,h;for(h="",l=0;;){if(u=s.indexOf("{",l),u===-1){h+=s.slice(l);break}h+=s.slice(l,u),l=s.indexOf("}",u)+1,h+=a(s.slice(u+1,l-1),f)}return h}return Fe={expand:n},Fe}/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var qe,xt;function lr(){if(xt)return qe;xt=1;var e,t,r;return e=Z(),t=Pn(),r=xe(),qe=e({init:function(i){return i.params=i.params||{},i.template=i.template||"",i},request:function(i,a){var n,s;return n=i.path||a.template,s=r({},i.params,a.params),i.path=t.expand(n,s),delete i.params,i}}),qe}/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Ne,Et;function Ln(){return Et||(Et=1,Ne={findProperties:function e(t,r,i){typeof t!="object"||t===null||(r in t&&i(t[r],t,r),Object.keys(t).forEach(function(a){e(t[a],r,i)}))}}),Ne}/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Me,Ct;function fr(){if(Ct)return Me;Ct=1;function e(t){try{return Promise.resolve(t())}catch(r){return Promise.reject(r)}}return Me=e,Me}/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Ue,At;function Rn(){if(At)return Ue;At=1;var e=fr();function t(r){var i,a,n,s;return i=!1,n=new Promise(function(f,u){a={resolve:f,reject:u}}),s=n.then,n.then=function(){return i||(i=!0,e(r).then(a.resolve,a.reject)),s.apply(n,arguments)},n}return Ue=t,Ue}/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var ze,Pt;function On(){if(Pt)return ze;Pt=1;var e,t,r,i,a;e=sr(),t=lr(),r=Ln(),i=Rn(),a=it;function n(s,f,u){Object.defineProperty(s,f,{value:u,configurable:!0,enumerable:!1,writeable:!0})}return ze={read:function(s,f){var u,l;f=f||{},u=f.client,l=f.console||l;function h(v,y){(y&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+v+"' is deprecated, see "+y)}return f.registry.lookup(f.mime.suffix).then(function(v){return v.read(s,f)}).then(function(v){return r.findProperties(v,"_embedded",function(y,P,w){Object.keys(y).forEach(function(x){if(!(x in P)){var j=a({entity:y[x]});n(P,x,j)}}),n(P,w,y)}),r.findProperties(v,"_links",function(y,P,w){Object.keys(y).forEach(function(x){var j=y[x];x in P||n(P,x,a.make(i(function(){return j.deprecation&&h(x,j.deprecation),j.templated===!0?t(u)({path:j.href}):u({path:j.href})})))}),n(P,w,y),n(P,"clientFor",function(x,j){var O=y[x];if(!O)throw new Error("Unknown relationship: "+x);return O.deprecation&&h(x,O.deprecation),O.templated===!0?t(j||u,{template:O.href}):e(j||u,{prefix:O.href})}),n(P,"requestFor",function(x,j,O){var T=this.clientFor(x,O);return T(j)})}),v})},write:function(s,f){return f.registry.lookup(f.mime.suffix).then(function(u){return u.write(s,f)})}},ze}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var $e,Lt;function kn(){if(Lt)return $e;Lt=1;function e(t,r){return{read:function(i){return JSON.parse(i,t)},write:function(i){return JSON.stringify(i,r)},extend:e}}return $e=e(),$e}/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Michael Jackson
 */var He,Rt;function Sn(){if(Rt)return He;Rt=1;function e(r){return r&&r.nodeType===1&&r.tagName==="FORM"}function t(r){var i=new FormData,a;for(var n in r)r.hasOwnProperty(n)&&(a=r[n],a instanceof File?i.append(n,a,a.name):a instanceof Blob?i.append(n,a):i.append(n,String(a)));return i}return He={write:function(r){if(typeof FormData>"u")throw new Error("The multipart/form-data mime serializer requires FormData support");if(r instanceof FormData)return r;if(e(r))return new FormData(r);if(typeof r=="object"&&r!==null)return t(r);throw new Error("Unable to create FormData from object "+r)}},He}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Ge,Ot;function jn(){return Ot||(Ot=1,Ge={read:function(e){return e},write:function(e){return e.toString()}}),Ge}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var We,kt;function In(){if(kt)return We;kt=1;var e,t;e=ur();function r(i){this.lookup=function(n){var s;return s=typeof n=="string"?e.parse(n):n,i[s.raw]?i[s.raw]:i[s.type+s.suffix]?i[s.type+s.suffix]:i[s.type]?i[s.type]:i[s.suffix]?i[s.suffix]:Promise.reject(new Error('Unable to locate converter for mime "'+s.raw+'"'))},this.delegate=function(n){return{read:function(){var s=arguments;return this.lookup(n).then(function(f){return f.read.apply(this,s)}.bind(this))}.bind(this),write:function(){var s=arguments;return this.lookup(n).then(function(f){return f.write.apply(this,s)}.bind(this))}.bind(this)}},this.register=function(n,s){return i[n]=Promise.resolve(s),i[n]},this.child=function(){return new r(Object.create(i))}}return t=new r({}),t.register("application/hal",On()),t.register("application/json",kn()),t.register("application/x-www-form-urlencoded",ar()),t.register("multipart/form-data",Sn()),t.register("text/plain",jn()),t.register("+json",t.delegate("application/json")),We=t,We}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Qe,St;function Tn(){if(St)return Qe;St=1;var e,t,r,i,a,n;return e=Z(),t=ur(),r=In(),n=fr(),i={read:function(s){return s},write:function(s){return s}},a={read:function(){throw"No read method found on converter"},write:function(){throw"No write method found on converter"}},Qe=e({init:function(s){return s.registry=s.registry||r,s},request:function(s,f){var u,l;return l=s.headers||(s.headers={}),u=t.parse(l["Content-Type"]||f.mime||"text/plain"),l.Accept=l.Accept||f.accept||u.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in s?(l["Content-Type"]=u.raw,f.registry.lookup(u).catch(function(){if(f.permissive)return i;throw"mime-unknown"}).then(function(h){var v=f.client||s.originator,y=h.write||a.write;return n(y.bind(void 0,s.entity,{client:v,request:s,mime:u,registry:f.registry})).catch(function(){throw"mime-serialization"}).then(function(P){return s.entity=P,s})})):s},response:function(s,f){if(!(s.headers&&s.headers["Content-Type"]&&s.entity))return s;var u=t.parse(s.headers["Content-Type"]);return f.registry.lookup(u).catch(function(){return i}).then(function(l){var h=f.client||s.request&&s.request.originator,v=l.read||a.read;return n(v.bind(void 0,s.entity,{client:h,response:s,mime:u,registry:f.registry})).catch(function(y){throw s.error="mime-deserialization",s.cause=y,s}).then(function(y){return s.entity=y,s})})}}),Qe}/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */var Be,jt;function Dn(){if(jt)return Be;jt=1;var e,t,r;return e=Z(),t=xe(),r=function(){function i(s,f,u){(s in f||s in u)&&(f[s]=t({},u[s],f[s]))}function a(s,f,u){s in u&&!(s in f)&&(f[s]=u[s])}var n={method:a,path:a,params:i,headers:i,entity:a,mixin:i};return function(s,f){for(var u in n)n[u](u,s,f);return s}}(),Be=e({request:function(a,n){return r(a,n)}}),Be}var Ve,It;function Fn(){return It||(It=1,Ve=function(){function e(r){return'"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(r,i){var a={start:l,LinkValue:h,LinkParams:v,URIReference:y,LinkParam:P,LinkParamName:w,LinkParamValue:x,PToken:j,PTokenChar:O,OptionalSP:T,QuotedString:Q,QuotedStringInternal:N,Char:M,UpAlpha:L,LoAlpha:I,Alpha:W,Digit:U,SP:ee,DQ:te,QDText:X,QuotedPair:B};if(i!==void 0){if(a[i]===void 0)throw new Error("Invalid rule name: "+e(i)+".")}else i="start";var n=0,s=0,f=[];function u(o){n<s||(n>s&&(s=n,f=[]),f.push(o))}function l(){var o,d,g,_,A,R,k,F,$;for(R=n,k=n,o=[],F=n,$=n,d=h(),d!==null?(g=T(),g!==null?(r.charCodeAt(n)===44?(_=",",n++):(_=null,u('","')),_!==null?(A=T(),A!==null?d=[d,g,_,A]:(d=null,n=$)):(d=null,n=$)):(d=null,n=$)):(d=null,n=$),d!==null&&(d=function(ne,K){return K}(F,d[0])),d===null&&(n=F);d!==null;)o.push(d),F=n,$=n,d=h(),d!==null?(g=T(),g!==null?(r.charCodeAt(n)===44?(_=",",n++):(_=null,u('","')),_!==null?(A=T(),A!==null?d=[d,g,_,A]:(d=null,n=$)):(d=null,n=$)):(d=null,n=$)):(d=null,n=$),d!==null&&(d=function(ne,K){return K}(F,d[0])),d===null&&(n=F);return o!==null?(d=h(),d!==null?o=[o,d]:(o=null,n=k)):(o=null,n=k),o!==null&&(o=function(ne,K,Y){return K.concat([Y])}(R,o[0],o[1])),o===null&&(n=R),o}function h(){var o,d,g,_,A,R,k,F;if(k=n,F=n,r.charCodeAt(n)===60?(o="<",n++):(o=null,u('"<"')),o!==null)if(d=y(),d!==null)if(r.charCodeAt(n)===62?(g=">",n++):(g=null,u('">"')),g!==null)if(_=T(),_!==null){for(A=[],R=v();R!==null;)A.push(R),R=v();A!==null?o=[o,d,g,_,A]:(o=null,n=F)}else o=null,n=F;else o=null,n=F;else o=null,n=F;else o=null,n=F;return o!==null&&(o=function($,ne,K){var Y={};return K.forEach(function(ve){Y[ve[0]]=ve[1]}),Y.href=ne,Y}(k,o[1],o[4])),o===null&&(n=k),o}function v(){var o,d,g,_,A,R;return A=n,R=n,r.charCodeAt(n)===59?(o=";",n++):(o=null,u('";"')),o!==null?(d=T(),d!==null?(g=P(),g!==null?(_=T(),_!==null?o=[o,d,g,_]:(o=null,n=R)):(o=null,n=R)):(o=null,n=R)):(o=null,n=R),o!==null&&(o=function(k,F){return F}(A,o[2])),o===null&&(n=A),o}function y(){var o,d,g;if(g=n,/^[^>]/.test(r.charAt(n))?(d=r.charAt(n),n++):(d=null,u("[^>]")),d!==null)for(o=[];d!==null;)o.push(d),/^[^>]/.test(r.charAt(n))?(d=r.charAt(n),n++):(d=null,u("[^>]"));else o=null;return o!==null&&(o=function(_,A){return A.join("")}(g,o)),o===null&&(n=g),o}function P(){var o,d,g,_;return g=n,_=n,o=w(),o!==null?(d=x(),d=d!==null?d:"",d!==null?o=[o,d]:(o=null,n=_)):(o=null,n=_),o!==null&&(o=function(A,R,k){return[R,k]}(g,o[0],o[1])),o===null&&(n=g),o}function w(){var o,d,g;if(g=n,/^[a-z]/.test(r.charAt(n))?(d=r.charAt(n),n++):(d=null,u("[a-z]")),d!==null)for(o=[];d!==null;)o.push(d),/^[a-z]/.test(r.charAt(n))?(d=r.charAt(n),n++):(d=null,u("[a-z]"));else o=null;return o!==null&&(o=function(_,A){return A.join("")}(g,o)),o===null&&(n=g),o}function x(){var o,d,g,_;return g=n,_=n,r.charCodeAt(n)===61?(o="=",n++):(o=null,u('"="')),o!==null?(d=j(),d===null&&(d=Q()),d!==null?o=[o,d]:(o=null,n=_)):(o=null,n=_),o!==null&&(o=function(A,R){return R}(g,o[1])),o===null&&(n=g),o}function j(){var o,d,g;if(g=n,d=O(),d!==null)for(o=[];d!==null;)o.push(d),d=O();else o=null;return o!==null&&(o=function(_,A){return A.join("")}(g,o)),o===null&&(n=g),o}function O(){var o;return r.charCodeAt(n)===33?(o="!",n++):(o=null,u('"!"')),o===null&&(r.charCodeAt(n)===35?(o="#",n++):(o=null,u('"#"')),o===null&&(r.charCodeAt(n)===36?(o="$",n++):(o=null,u('"$"')),o===null&&(r.charCodeAt(n)===37?(o="%",n++):(o=null,u('"%"')),o===null&&(r.charCodeAt(n)===38?(o="&",n++):(o=null,u('"&"')),o===null&&(r.charCodeAt(n)===39?(o="'",n++):(o=null,u(`"'"`)),o===null&&(r.charCodeAt(n)===40?(o="(",n++):(o=null,u('"("')),o===null&&(r.charCodeAt(n)===41?(o=")",n++):(o=null,u('")"')),o===null&&(r.charCodeAt(n)===42?(o="*",n++):(o=null,u('"*"')),o===null&&(r.charCodeAt(n)===43?(o="+",n++):(o=null,u('"+"')),o===null&&(r.charCodeAt(n)===45?(o="-",n++):(o=null,u('"-"')),o===null&&(r.charCodeAt(n)===46?(o=".",n++):(o=null,u('"."')),o===null&&(r.charCodeAt(n)===124?(o="|",n++):(o=null,u('"|"')),o===null&&(o=U(),o===null&&(r.charCodeAt(n)===58?(o=":",n++):(o=null,u('":"')),o===null&&(r.charCodeAt(n)===60?(o="<",n++):(o=null,u('"<"')),o===null&&(r.charCodeAt(n)===61?(o="=",n++):(o=null,u('"="')),o===null&&(r.charCodeAt(n)===62?(o=">",n++):(o=null,u('">"')),o===null&&(r.charCodeAt(n)===63?(o="?",n++):(o=null,u('"?"')),o===null&&(r.charCodeAt(n)===64?(o="@",n++):(o=null,u('"@"')),o===null&&(o=W(),o===null&&(r.charCodeAt(n)===91?(o="[",n++):(o=null,u('"["')),o===null&&(r.charCodeAt(n)===93?(o="]",n++):(o=null,u('"]"')),o===null&&(r.charCodeAt(n)===94?(o="^",n++):(o=null,u('"^"')),o===null&&(r.charCodeAt(n)===95?(o="_",n++):(o=null,u('"_"')),o===null&&(r.charCodeAt(n)===96?(o="`",n++):(o=null,u('"`"')),o===null&&(r.charCodeAt(n)===123?(o="{",n++):(o=null,u('"{"')),o===null&&(/^[\/\/]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u("[\\/\\/]")),o===null&&(r.charCodeAt(n)===125?(o="}",n++):(o=null,u('"}"')),o===null&&(r.charCodeAt(n)===126?(o="~",n++):(o=null,u('"~"'))))))))))))))))))))))))))))))),o}function T(){var o,d;for(o=[],d=ee();d!==null;)o.push(d),d=ee();return o}function Q(){var o,d,g,_,A;return _=n,A=n,o=te(),o!==null?(d=N(),d!==null?(g=te(),g!==null?o=[o,d,g]:(o=null,n=A)):(o=null,n=A)):(o=null,n=A),o!==null&&(o=function(R,k){return k}(_,o[1])),o===null&&(n=_),o}function N(){var o,d,g;for(g=n,o=[],d=X(),d===null&&(d=B());d!==null;)o.push(d),d=X(),d===null&&(d=B());return o!==null&&(o=function(_,A){return A.join("")}(g,o)),o===null&&(n=g),o}function M(){var o;return/^[\0-]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u("[\\0-\x7F]")),o}function L(){var o;return/^[A-Z]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u("[A-Z]")),o}function I(){var o;return/^[a-z]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u("[a-z]")),o}function W(){var o;return o=L(),o===null&&(o=I()),o}function U(){var o;return/^[0-9]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u("[0-9]")),o}function ee(){var o;return/^[ ]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u("[ ]")),o}function te(){var o;return/^["]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u('["]')),o}function X(){var o;return/^[^"]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u('[^"]')),o}function B(){var o,d,g;return g=n,/^[\\]/.test(r.charAt(n))?(o=r.charAt(n),n++):(o=null,u("[\\\\]")),o!==null?(d=M(),d!==null?o=[o,d]:(o=null,n=g)):(o=null,n=g),o}function J(o){o.sort();for(var d=null,g=[],_=0;_<o.length;_++)o[_]!==d&&(g.push(o[_]),d=o[_]);return g}function re(){for(var o=1,d=1,g=!1,_=0;_<Math.max(n,s);_++){var A=r.charAt(_);A===`
`?(g||o++,d=1,g=!1):A==="\r"||A==="\u2028"||A==="\u2029"?(o++,d=1,g=!0):(d++,g=!1)}return{line:o,column:d}}var V=a[i]();if(V===null||n!==r.length){var ue=Math.max(n,s),Ee=ue<r.length?r.charAt(ue):null,me=re();throw new this.SyntaxError(J(f),Ee,ue,me.line,me.column)}return V},toSource:function(){return this._source}};return t.SyntaxError=function(r,i,a,n,s){function f(u,l){var h,v;switch(u.length){case 0:h="end of input";break;case 1:h=u[0];break;default:h=u.slice(0,u.length-1).join(", ")+" or "+u[u.length-1]}return v=l?e(l):"end of input","Expected "+h+" but "+v+" found."}this.name="SyntaxError",this.expected=r,this.found=i,this.message=f(r,i),this.offset=a,this.line=n,this.column=s},t.SyntaxError.prototype=Error.prototype,t}()),Ve}const qn={},Nn=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"})),Tt=wr(Nn);var Ke,Dt;function Mn(){if(Dt)return Ke;Dt=1;var e=Z(),t=Fn(),r=Tt,i=Tt,a=e({success:function(n,s){var f=n&&n.headers&&n.headers.Link,u=n&&n.request&&n.request.originator;if(f){var l=t.parse(f).filter(function(h){return h.rel==="next"})[0];l&&(n.nextPage=function(h){var v=r.parse(l.href),y=i.parse(v.query);return y.access_token=y.access_token||s.access_token,v.search=i.stringify(y),u({path:r.format(v),callback:h})})}return n}});return Ke=a,Ke}var Xe,Ft;function Un(){if(Ft)return Xe;Ft=1;var e=Z(),t=e({response:r});function r(i){return{url:i.url,status:i.status&&i.status.code,headers:i.headers,entity:i.entity,error:i.error,callback:i.request&&i.request.callback,nextPage:i.nextPage}}return Xe=t,Xe}var Je,qt;function zn(){if(qt)return Je;qt=1;var e=Z(),t=e({success:function(r){var i=r&&r.callback;return typeof i=="function"&&i(null,r.entity,r),r},error:function(r){var i=r&&r.callback;if(typeof i=="function"){var a=r.error||r.entity;typeof a!="object"&&(a=new Error(a)),i(a)}return r}});return Je=t,Je}var $n=xn,Hn=function(e){return $n.wrap(En()).wrap(sr(),{prefix:e.endpoint}).wrap(Tn(),{mime:"application/json"}).wrap(lr()).wrap(Dn(),{params:{access_token:e.accessToken}}).wrap(Mn(),{access_token:e.accessToken}).wrap(Un()).wrap(zn())},ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Gn(e){if(/([^\u0000-\u00ff])/.test(e))throw new Error("Can't base64 encode non-ASCII characters.");for(var t=0,r,i,a,n=[];t<e.length;){switch(r=e.charCodeAt(t),a=t%3,a){case 0:n.push(ie.charAt(r>>2));break;case 1:n.push(ie.charAt((i&3)<<4|r>>4));break;case 2:n.push(ie.charAt((i&15)<<2|r>>6)),n.push(ie.charAt(r&63));break}i=r,t+=1}return a===0?(n.push(ie.charAt((i&3)<<4)),n.push("==")):a===1&&(n.push(ie.charAt((i&15)<<2)),n.push("=")),n.join("")}function Wn(e){if(e=e.replace(/\s/g,""),!/^[a-z0-9\+\/\s]+\={0,2}$/i.test(e)||e.length%4>0)throw new Error("Not a base64-encoded string.");var t,r,i,a=0,n=[];for(e=e.replace(/\=/g,"");a<e.length;){switch(t=ie.indexOf(e.charAt(a)),i=a%4,i){case 1:n.push(String.fromCharCode(r<<2|t>>4));break;case 2:n.push(String.fromCharCode((r&15)<<4|t>>2));break;case 3:n.push(String.fromCharCode((r&3)<<6|t));break}r=t,a+=1}return n.join("")}var Qn={encode:Gn,decode:Wn},Bn=Qn;function Vn(e){var t=e.split(".")[1];if(!t)return null;t=t.replace(/-/g,"+").replace(/_/g,"/");var r=t.length%4;if(r===2&&(t+="=="),r===3&&(t+="="),r===1||r>3)return null;try{return JSON.parse(Bn.decode(t)).u}catch{return null}}var Kn=Vn,le=Xt,Xn=Jt,Jn=Hn,Yn=Kn;function Zn(e){function t(r,i){this.name=e,le(typeof r=="string","accessToken required to instantiate Mapbox client");var a=Xn.DEFAULT_ENDPOINT;i!==void 0&&(le(typeof i=="object","options must be an object"),i.endpoint&&(le(typeof i.endpoint=="string","endpoint must be a string"),a=i.endpoint),i.account&&(le(typeof i.account=="string","account must be a string"),this.owner=i.account)),this.client=Jn({endpoint:a,accessToken:r}),this.accessToken=r,this.endpoint=a,this.owner=this.owner||Yn(r),le(!!this.owner,"could not determine account from provided accessToken")}return t}var ei=Zn,D=Xt,ti=ei,ot=ti("MapboxGeocoding"),ri="/geocoding/v5/{dataset}/{query}.json{?access_token,proximity,country,types,bbox,limit,autocomplete,language}",ni="/geocoding/v5/{dataset}/{longitude},{latitude}.json{?access_token,types,limit,language}",ii=5,oi=3;function be(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}ot.prototype.geocodeForward=function(e,t,r){if(r===void 0&&typeof t=="function"&&(r=t,t={}),Array.isArray(e)){if(t.dataset!=="mapbox.places-permanent")throw new Error("Batch geocoding is only available with the mapbox.places-permanent endpoint. See https://mapbox.com/api-documentation/#batch-requests for details");e=e.join(";")}D(typeof e=="string","query must be a string"),D(typeof t=="object","options must be an object");var i={query:e,dataset:"mapbox.places"},a=oi;return t.precision&&(D(typeof t.precision=="number","precision option must be number"),a=t.precision),t.proximity&&(D(typeof t.proximity.latitude=="number"&&typeof t.proximity.longitude=="number","proximity must be an object with numeric latitude & longitude properties"),i.proximity=be(t.proximity.longitude,a)+","+be(t.proximity.latitude,a)),t.bbox&&(D(typeof t.bbox[0]=="number"&&typeof t.bbox[1]=="number"&&typeof t.bbox[2]=="number"&&typeof t.bbox[3]=="number"&&t.bbox.length===4,"bbox must be an array with numeric values in the form [minX, minY, maxX, maxY]"),i.bbox=t.bbox[0]+","+t.bbox[1]+","+t.bbox[2]+","+t.bbox[3]),t.limit&&(D(typeof t.limit=="number","limit must be a number"),i.limit=t.limit),t.dataset&&(D(typeof t.dataset=="string","dataset option must be string"),i.dataset=t.dataset),t.country&&(D(typeof t.country=="string","country option must be string"),i.country=t.country),t.language&&(D(typeof t.language=="string","language option must be string"),i.language=t.language),t.types&&(D(typeof t.types=="string","types option must be string"),i.types=t.types),typeof t.autocomplete=="boolean"&&(D(typeof t.autocomplete=="boolean","autocomplete must be a boolean"),i.autocomplete=t.autocomplete),this.client({path:ri,params:i,callback:r})};ot.prototype.geocodeReverse=function(e,t,r){r===void 0&&typeof t=="function"&&(r=t,t={}),D(typeof e=="object","location must be an object"),D(typeof t=="object","options must be an object"),D(typeof e.latitude=="number"&&typeof e.longitude=="number","location must be an object with numeric latitude & longitude properties");var i={dataset:"mapbox.places"};t.dataset&&(D(typeof t.dataset=="string","dataset option must be string"),i.dataset=t.dataset);var a=ii;return t.precision&&(D(typeof t.precision=="number","precision option must be number"),a=t.precision),t.language&&(D(typeof t.language=="string","language option must be string"),i.language=t.language),t.types&&(D(typeof t.types=="string","types option must be string"),i.types=t.types),t.limit&&(D(typeof t.limit=="number","limit option must be a number"),D(t.types.split(",").length===1,"a single type must be specified to use the limit option"),i.limit=t.limit),i.longitude=be(e.longitude,a),i.latitude=be(e.latitude,a),this.client({path:ni,params:i,callback:r})};var ai=ot,si=Dr,ui=Zr,li=Mt,fi=rt.exports.EventEmitter,Ye=sn,ci=ai;function cr(e){this._eventEmitter=new fi,this.options=li({},this.options,e)}cr.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0,trackProximity:!1,minLength:2,limit:5},onAdd:function(e){this._map=e,this.mapboxClient=new ci(this.options.accessToken),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this._clear=this._clear.bind(this),this._updateProximity=this._updateProximity.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=document.createElement("span");r.className="geocoder-icon geocoder-icon-search",this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.placeholder=this.options.placeholder,this._inputEl.addEventListener("keydown",this._onKeyDown),this._inputEl.addEventListener("change",this._onChange);var i=document.createElement("div");return i.classList.add("geocoder-pin-right"),this._clearEl=document.createElement("button"),this._clearEl.className="geocoder-icon geocoder-icon-close",this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this._clear),this._loadingEl=document.createElement("span"),this._loadingEl.className="geocoder-icon geocoder-icon-loading",i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new si(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this._typeahead.getItemValue=function(a){return a.place_name},this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),t},onRemove:function(){return this.container.parentNode.removeChild(this.container),this._map=null,this.options.trackProximity&&this._map.off("moveend",this._updateProximity),this},_onKeyDown:ui(function(e){var t=e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!t.value)return this._clearEl.style.display="none";e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1||t.value.length>=this.options.minLength&&this._geocode(t.value)},200),_onChange:function(){this._inputEl.value&&(this._clearEl.style.display="block");var e=this._typeahead.selected;if(e){if(this.options.flyTo)if(!Ye[e.id]&&e.bbox){var t=e.bbox;this._map.fitBounds([[t[0],t[1]],[t[2],t[3]]])}else Ye[e.id]?this._map.fitBounds(Ye[e.id].bbox):this._map.flyTo({center:e.center,zoom:this.options.zoom});this._eventEmitter.emit("result",{result:e})}},_geocode:function(e){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:e});var t=this.mapboxClient.geocodeForward(e,this.options),r=[];return this.options.localGeocoder&&(r=this.options.localGeocoder(e),r||(r=[])),t.then(function(i){this._loadingEl.style.display="none";var a={};i.status=="200"&&(a=i.entity),a.features=a.features?r.concat(a.features):r,this.options.filter&&a.features.length&&(a.features=a.features.filter(this.options.filter)),a.features.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",a),this._typeahead.update(a.features)}.bind(this)),t.catch(function(i){this._loadingEl.style.display="none",r.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",{features:r}),this._typeahead.update(r),this._eventEmitter.emit("error",{error:i})}.bind(this)),t},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._inputEl.focus(),this._clearEl.style.display="none",this._eventEmitter.emit("clear")},_onQueryResult:function(e){var t=e.entity;if(!!t.features.length){var r=t.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)},query:function(e){return this._geocode(e).then(this._onQueryResult),this},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},setProximity:function(e){return this.options.proximity=e,this},getProximity:function(){return this.options.proximity},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this}};var hi=cr;function di(e,t){t===void 0&&(t={});var r=0,i=0,a=0;return xr(e,function(n){r+=n[0],i+=n[1],a++},!0),Er([r/a,i/a],t.properties)}const pi=document.querySelector("#app"),pe=new Lr.exports.Map({container:pi,zoom:18,center:[2.3592843,48.8767904],style:"mapbox://styles/mapbox/streets-v10",accessToken:Nt,hash:!0});Cr(pe);const tt=await(await fetch("maps/gare-de-l-est.geojson")).json();pe.indoor.addMap(Ar.fromGeojson(tt));const hr=new hi({localGeocoderOnly:!0,localGeocoder:e=>{const t=[];for(let r=0;r<tt.features.length;r++){const i=tt.features[r];i.properties.name&&i.properties.name.toLowerCase().search(e.toLowerCase())!==-1&&(i.place_name=i.properties.name,i.center=di(i).geometry.coordinates,i.place_type=["park"],t.push(i))}return t},accessToken:Nt,zoom:20,placeholder:"Enter search e.g. Room",marker:!1});hr.on("result",e=>{e.result.properties&&e.result.properties.level&&pe.indoor.setLevel(parseInt(e.result.properties.level))});pe.addControl(hr,"top-left");pe.addControl(new Pr);
//# sourceMappingURL=search-engine.29166cfc.js.map
